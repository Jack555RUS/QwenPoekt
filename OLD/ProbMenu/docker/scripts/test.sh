#!/bin/bash
# =============================================================================
# Docker Test Script для ProbMenu (Linux/WSL)
# =============================================================================

set -e

echo "=================================================="
echo "  Docker Test - ProbMenu"
echo "=================================================="

# Создание директории для результатов
mkdir -p TestResults

# Запуск тестов
echo -e "\nЗапуск тестов в контейнере..."
docker compose --profile test run --rm test-runner

TEST_RESULT=$?

echo -e "\n=================================================="
if [ $TEST_RESULT -eq 0 ]; then
    echo "  ВСЕ ТЕСТЫ ПРОЙДЕНЫ ✓"
else
    echo "  ТЕСТЫ НЕ ПРОЙДЕНЫ ✗ (код: $TEST_RESULT)"
fi
echo "=================================================="

exit $TEST_RESULT
