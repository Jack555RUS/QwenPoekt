# Журнал операций

**Назначение:** Регистрация всех операций с файлами (удаление, перемещение, массовое изменение)

**Правила ведения:**
- Каждая запись начинается с заголовка `## ГГГГ-ММ-ДД ЧЧ:ММ Название`
- Обязательно указывать тип операции и путь к бэкапу
- После выполнения операции обновить статус (✅/❌)

---

## 2026-03-02 02:12 Восстановление после сбоя _TEMP

**Тип:** Восстановление из Git

**Причина:** Потеря ~21 скрипта PowerShell и ~37 отчётов из-за досрочного закрытия терминала при очистке _TEMP

**Бэкап:**
- Путь: Git коммит `1efdea82c`
- Время: 2026-03-02 02:12
- Файлов: 39 восстановлено

**Шаги:**
- [x] 1. Анализ сбоя (причина: работа без бэкапа)
- [x] 2. Восстановление из Git (`git restore`)
- [x] 3. Проверка целостности (все файлы на месте)
- [x] 4. Запись в лог

**Результат:** ✅ Все файлы восстановлены

**Урок:** Всегда создавать бэкап перед операциями!

---

## 2026-03-02 03:23 Тестирование pre-operation-backup.ps1

**Тип:** Предоперационный бэкап (тестовый запуск)

**Операция:** Test_Backup

**Бэкап:**
- Путь: D:\QwenPoekt\_BACKUP\2026-03-02_03-23_Test_Backup
- Режим: WhatIf (только проверка)
- Файлов: 82 735
- Размер: 2 508.62 MB

**Шаги:**
- [x] 1. Тест в режиме WhatIf
- [ ] 2. Реальное создание бэкапа (по необходимости)

**Результат:** ✅ Скрипт готов к работе

**Примечание:** Полный бэкап занимает ~2.5 GB. Рекомендуется использовать выборочное копирование для конкретных операций.

---

## ШАБЛОН ДЛЯ НОВЫХ ЗАПИСЕЙ

```markdown
## ГГГГ-ММ-ДД ЧЧ:ММ Название операции

**Тип:** Удаление / Перемещение / Изменение / Бэкап / Восстановление

**Описание:**
Краткое описание операции

**Бэкап:**
- Путь: D:\QwenPoekt\_BACKUP\...
- Время: ГГГГ-ММ-ДД ЧЧ:ММ
- Файлов: XXX
- Размер: XXX MB

**Шаги:**
- [ ] 1. Бэкап создан
- [ ] 2. Проверка целостности
- [ ] 3. Операция выполнена
- [ ] 4. Финальная проверка

**Результат:** ✅ Успешно / ❌ Отменено / ⚠️ Частично

**Примечания:**
[Дополнительная информация]

```

---
[2026-03-02 03:29:05] === БЕЗОПАСНОЕ УДАЛЕНИЕ ===
[2026-03-02 03:29:05] Шаг 0: Проверка пути...
[2026-03-02 03:29:05]   Путь: _LOCAL_ARCHIVE
[2026-03-02 03:29:05] Шаг 0.5: Проверка на критичность...
[2026-03-02 03:29:05] ✅ Папка не критична, удаление разрешено
[2026-03-02 03:29:05] Шаг 1: Анализ...
[2026-03-02 03:29:05]   Файлов: 0
[2026-03-02 03:29:05]   Размер: 0 MB
[2026-03-02 03:29:05] ⚠️  Папка пуста! Удаление не требуется.
[2026-03-02 03:29:12] === БЕЗОПАСНОЕ УДАЛЕНИЕ ===
[2026-03-02 03:29:12] Шаг 0: Проверка пути...
[2026-03-02 03:29:12]   Путь: _drafts
[2026-03-02 03:29:12] Шаг 0.5: Проверка на критичность...
[2026-03-02 03:29:12] ✅ Папка не критична, удаление разрешено
[2026-03-02 03:29:12] Шаг 1: Анализ...
[2026-03-02 03:29:12]   Файлов: 2
[2026-03-02 03:29:12]   Размер: 0.01 MB
[2026-03-02 03:29:12] ⚠️  РЕЖИМ ПРОВЕРКИ (WhatIf)
[2026-03-02 03:29:12] Удаление НЕ будет выполнено. Только информация:
[2026-03-02 03:29:12]   Путь: _drafts
[2026-03-02 03:29:12]   Файлов: 2
[2026-03-02 03:29:12]   Размер: 0.01 MB
[2026-03-02 03:29:12]   Бэкап: Будет создан
[2026-03-02 03:31:46] === АНАЛИЗ СТАРЫХ БЭКАПОВ ===
[2026-03-02 03:31:46] Порог анализа: 45 дней
[2026-03-02 03:31:46] Порог удаления: 60 дней
[2026-03-02 03:31:46] Шаг 0: Проверка папки _BACKUP...
[2026-03-02 03:31:46] ❌ ОШИБКА: Папка _BACKUP не существует: D:\QwenPoekt\_BACKUP
[2026-03-02 03:32:01] === АНАЛИЗ СТАРЫХ БЭКАПОВ ===
[2026-03-02 03:32:01] Порог анализа: 45 дней
[2026-03-02 03:32:01] Порог удаления: 60 дней
[2026-03-02 03:32:01] Шаг 0: Проверка папки _BACKUP...
[2026-03-02 03:32:01] ✅ Папка найдена: D:\QwenPoekt\_BACKUP
[2026-03-02 03:32:01] Шаг 1: Поиск бэкапов старше 45 дней...
[2026-03-02 03:32:01] ✅ Старых бэкапов не найдено!
[2026-03-02 03:32:01] Все бэкапы моложе 45 дней.
